function upLesson(e){var s=function(){for(var e=$("#course-modal-edit3").serializeArray(),s={},t=0;t<e.length;t++)s[e[t].name]=e[t].value;return s}(),t={ct_id:e||s.ct_id,ct_name:s.ct_name,ct_video_duration:s.ct_minutes+":"+s.ct_seconds};if(e)lessons.push(t);else{var o=function(e){for(var s=0;s<lessons.length;s++)if(lessons[s].ct_id==e)return s}(s.ct_id);lessons.splice(o,1,t)}$("#lesson-list").html(template("lesson-list-tpl",lessons))}require("../common/aside.js"),require("../common/header.js"),require("../common/common.js"),require("../common/loading.js");var getSearch=require("../common/util.js"),lessons;$.get("/v6/course/lesson",{cs_id:getSearch("cs_id")},function(e){200==e.code&&(e.result.Eindex=3,lessons=e.result.lessons,console.log(lessons),alert(e.msg),$(".course-add").html(template("course-form-edit3",e.result)))}),$(document).on("click","#btn-info",function(){$.get("/v6/course/chapter/edit",{ct_id:$(this).attr("data-id")},function(e){200==e.code&&$("#chapterModal").html(template("course-tem-edit3",e.result))})}),$("#course-modal-edit3").ajaxForm({delegation:!0,beforeSubmit:function(e,s,t){e.push({name:"ct_is_free",value:$("#ct_is_free").prop("checked")?1:0})},success:function(e){$("#course-modal-edit3").serializeArray();200==e.code&&(e.result?(alert("添加成功"),upLesson(e.result),console.log(lessons),$("#course-modal-edit3").get(0).reset()):(alert("修改成功"),upLesson(),console.log(lessons)))}}),$(document).on("click","#add_chapter",function(){$("#chapterModal").html(template("course-tem-edit3",{ct_cs_id:getSearch("cs_id")}))});